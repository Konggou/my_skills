---
name: project-framework-analyzer
description: 分析项目框架架构、功能模块和模块间关系的技能。当用户需要理解项目结构、分析代码架构、识别模块功能、梳理模块依赖关系或生成项目框架图时使用此技能。适用于分析任何类型的代码项目（Python、TypeScript、Vue、C++、ROS2等），帮助快速理解项目整体架构和设计模式。
---

# 项目框架分析器

## 概述

本技能提供系统化的项目框架分析方法，通过多步骤分析流程，帮助理解项目的整体架构、功能模块、模块间关系，并生成可视化的框架图。

## 分析工作流程

### 第一步：项目结构探索

1. **识别项目根目录和主要目录结构**
   - 使用 `list_dir` 查看项目根目录
   - 识别前端/后端目录、配置文件、文档目录
   - 注意 `.gitignore`、`package.json`、`requirements.txt` 等配置文件

2. **识别技术栈**
   - 查看依赖文件（`package.json`、`requirements.txt`、`CMakeLists.txt` 等）
   - 识别主要框架和库（Vue、React、Flask、ROS2 等）
   - 识别编程语言（Python、TypeScript、C++ 等）

3. **理解项目组织模式**
   - 识别分层架构（前端/后端分离、MVC、微服务等）
   - 识别模块化组织方式（按功能、按层次、按领域）

### 第二步：框架架构分析

1. **识别核心架构模式**
   - 客户端-服务器架构
   - 前后端分离架构
   - 微服务架构
   - 事件驱动架构
   - ROS2 节点架构

2. **识别主要组件层次**
   - 前端层：UI 组件、状态管理、路由
   - 后端层：API 接口、业务逻辑、数据访问
   - 通信层：WebSocket、REST API、ROS2 Topics
   - 基础设施层：数据库、文件系统、外部服务

3. **分析依赖关系**
   - 使用 `codebase_search` 查找导入/依赖关系
   - 识别模块间的导入关系
   - 识别服务间的调用关系

### 第三步：功能模块分析

1. **识别功能模块**
   - 通过目录结构识别模块边界
   - 通过 API 路由识别功能域
   - 通过组件/类名识别功能职责

2. **分析每个模块的功能**
   - 读取模块的主要文件
   - 识别模块的输入输出
   - 识别模块的核心功能
   - 识别模块的依赖和被依赖关系

3. **记录模块信息**
   - 模块名称和位置
   - 主要功能描述
   - 关键类和函数
   - 依赖的其他模块
   - 被哪些模块依赖

### 第四步：模块关系串联

1. **构建依赖图**
   - 梳理模块间的直接依赖关系
   - 识别循环依赖（如果有）
   - 识别核心模块和边缘模块

2. **识别数据流**
   - 前端到后端的数据流
   - 后端内部的数据流
   - 事件/消息的流转路径

3. **识别控制流**
   - 用户交互到系统响应的流程
   - 业务流程的执行路径
   - 异常处理的流程

### 第五步：生成框架图

1. **选择图表类型**
   - **架构图**：展示系统整体架构和层次
   - **模块关系图**：展示模块间的依赖关系
   - **数据流图**：展示数据在系统中的流转
   - **组件图**：展示组件间的交互关系

2. **使用 Mermaid 语法生成图表**
   - 参考 `assets/framework-diagram-template.md` 中的模板
   - 使用流程图、类图、组件图等 Mermaid 图表类型
   - 确保图表清晰、层次分明

3. **生成分析报告**
   - 项目概述
   - 架构说明
   - 模块功能列表
   - 模块关系说明
   - 框架图

## 分析技巧

### 代码搜索策略

- 使用 `codebase_search` 进行语义搜索，查找相关功能
- 使用 `grep` 查找特定的导入、类名、函数名
- 使用 `read_file` 深入阅读关键文件

### 模块识别模式

- **按目录结构**：`src/components/`、`src/api/`、`server/api/` 等
- **按命名约定**：`*Controller`、`*Service`、`*Module` 等
- **按配置文件**：路由配置、API 端点定义

### 依赖关系识别

- 查看 `import`/`require` 语句
- 查看 API 调用
- 查看配置文件中的依赖声明
- 查看 WebSocket 事件订阅

## 输出格式

### 分析报告结构

```markdown
# [项目名称] 框架分析报告

## 1. 项目概述
- 项目类型：[前端/后端/全栈/ROS2等]
- 主要技术栈：[列出主要技术]
- 项目结构：[简要描述目录结构]

## 2. 架构分析
- 架构模式：[客户端-服务器/微服务/事件驱动等]
- 主要层次：[列出主要层次]
- 通信方式：[REST/WebSocket/ROS2 Topics等]

## 3. 功能模块列表
### 模块1：[模块名]
- 位置：[文件路径]
- 功能：[功能描述]
- 依赖：[依赖的模块]
- 被依赖：[依赖此模块的模块]

### 模块2：[模块名]
...

## 4. 模块关系图
[使用 Mermaid 语法生成的图表]

## 5. 系统架构图
[使用 Mermaid 语法生成的图表]
```

## 参考资源

- **分析模式**：参见 `references/analysis-patterns.md` 了解不同项目类型的分析模式
- **图表模板**：参见 `assets/framework-diagram-template.md` 获取 Mermaid 图表模板

## 注意事项

1. **渐进式分析**：先整体后局部，先结构后细节
2. **多角度验证**：通过代码、配置、文档多个角度验证理解
3. **关注关键路径**：重点关注核心业务流程和关键模块
4. **保持简洁**：框架图应简洁明了，避免过度复杂
5. **中文输出**：所有分析报告和说明使用中文
